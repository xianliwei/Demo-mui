<!doctype html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="css/mui.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>

  <body>
    <header class="mui-bar mui-bar-nav">
      <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
      <h1 class="mui-title">测试</h1>
    </header>

    <!--下拉刷新容器-->
    <div id="refreshContainer" class="mui-content mui-scroll-wrapper">

      <div class="mui-content" id="refreshContainer">
        <!-- 轮播图 -->
        <div class="mui-slider">
          <div class="mui-slider-group mui-slider-loop">
            <!--支持循环，需要重复图片节点-->
            <div class="mui-slider-item mui-slider-item-duplicate">
              <a href="#"><img src="img/pic4.jpg" /></a>
            </div>
            <div class="mui-slider-item">
              <a href="#"><img src="img/pic1.jpg" /></a>
            </div>
            <div class="mui-slider-item">
              <a href="#"><img src="img/pic2.jpg" /></a>
            </div>
            <div class="mui-slider-item">
              <a href="#"><img src="img/pic3.jpg" /></a>
            </div>
            <div class="mui-slider-item">
              <a href="#"><img src="img/pic4.jpg" /></a>
            </div>
            <!--支持循环，需要重复图片节点-->
            <div class="mui-slider-item mui-slider-item-duplicate">
              <a href="#"><img src="img/pic1.jpg" /></a>
            </div>
          </div>
        </div>
      </div>
      <div class="mui-scroll">
        <!--数据列表-->
        <ul class="mui-table-view">
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 1
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 2
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 3
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 4
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 5
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 6
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 7
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 8
            </a>
          </li>
          <li class="mui-table-view-cell">
            <a class="mui-navigate-right">
              Item 9
            </a>
          </li>
        </ul>
      </div>
      <button type="button" class="mui-btn mui-btn-blue mui-btn-block" id="btns" onclick="createBarcode()">点击扫二维码</button>
    </div>

    <!-- 底部 -->
    <nav class="mui-bar mui-bar-tab">
      <a class="mui-tab-item mui-active">
        <span class="mui-icon mui-icon-home"></span>
        <span class="mui-tab-label">首页</span>
      </a>
      <a class="mui-tab-item">
        <span class="mui-icon mui-icon-phone"></span>
        <span class="mui-tab-label">详情</span>
      </a>
      <a class="mui-tab-item">
        <span class="mui-icon mui-icon-email"></span>
        <span class="mui-tab-label">我的</span>
      </a>
      <a class="mui-tab-item">
        <span class="mui-icon mui-icon-gear"></span>
        <span class="mui-tab-label">设置</span>
      </a>
    </nav>

    <script src="js/mui.js" type="text/javascript" charset="utf-8"></script>
    <!--<script src="js/vue.min.js"></script>-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/js-data-http/2.2.2/js-data-http.min.js" type="text/javascript"></script>-->
    <!--<script src="js/list.js" type="text/javascript"></script>-->
    <script type="text/javascript">
      //    mui.init();
      mui.init({
        styles: {
          width: '100%',
          overflow: 'hidden'
          //        overflow-y: 'scroll'
        },
        pullRefresh: {
          container: "#refreshContainer", //下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等
          down: {
            style: 'circle', //必选，下拉刷新样式，目前支持原生5+ ‘circle’ 样式
            color: '#2BD009', //可选，默认“#2BD009” 下拉刷新控件颜色
            height: '50px', //可选,默认50px.下拉刷新控件的高度,
            range: '100px', //可选 默认100px,控件可下拉拖拽的范围
            offset: '0px', //可选 默认0px,下拉刷新控件的起始位置
            auto: false, //可选,默认false.首次加载自动上拉刷新一次
            callback: pullfreshfunction //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
          },
          up: {
            height: 50, //可选.默认50.触发上拉加载拖动距离
            auto: true, //可选,默认false.自动上拉加载一次
            contentrefresh: "正在加载...", //可选，正在加载状态时，上拉加载控件上显示的标题内容
            contentnomore: '没有更多数据了', //可选，请求完毕若没有更多数据时显示的提醒内容；
            callback: fn //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
          }
        }
      });

      function pullfreshfunction() {
        
        mui('#refreshContainer').pullRefresh().endPulldown();
      }
      function fn() {
       console.log('123');
       mui('#refreshContainer').pullRefresh().disablePullupToRefresh();
//     mui('#refreshContainer').pullRefresh().enablePullupToRefresh();
      }
      
      
      
      var barcode = null;
      mui('.mui-content').on('click', '#btns', function(type, result) {
        var text = '未知: ';
        switch(type){
          case plus.barcode.QR:
          text = 'QR: ';
          break;
          case plus.barcode.EAN13:
          text = 'EAN13: ';
          break;
          case plus.barcode.EAN8:
          text = 'EAN8: ';
          break;
        }
        alert( text+result );
      alert('点击了扫描二维码按钮')
    })
//    var barcode = null;
//// 扫码成功回调
//function onmarked(type, result) {
//var text = '未知: ';
//switch(type){
//  case plus.barcode.QR:
//  text = 'QR: ';
//  break;
//  case plus.barcode.EAN13:
//  text = 'EAN13: ';
//  break;
//  case plus.barcode.EAN8:
//  text = 'EAN8: ';
//  break;
//}
//alert( text+result );
//}
// 创建Barcode扫码控件
function btns() {
  if(!barcode){
    barcode = plus.barcode.create('barcode', [plus.barcode.QR], {
      top:'100px',
      left:'0px',
      width: '100%',
      height: '200px',
      position: 'static'
    });
    barcode.onmarked = onmarked;
    plus.webview.currentWebview().append(barcode);
  }
  barcode.start();
}
    </script>
  </body>

</html>